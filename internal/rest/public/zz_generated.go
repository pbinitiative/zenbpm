// Package public provides primitives to interact with the openapi HTTP API.
//
// Code generated by github.com/oapi-codegen/oapi-codegen/v2 version v2.4.1 DO NOT EDIT.
package public

import (
	"bytes"
	"compress/gzip"
	"context"
	"encoding/base64"
	"encoding/json"
	"fmt"
	"io"
	"net/http"
	"net/url"
	"path"
	"strings"
	"time"

	"github.com/getkin/kin-openapi/openapi3"
	"github.com/go-chi/chi/v5"
	"github.com/oapi-codegen/runtime"
	strictnethttp "github.com/oapi-codegen/runtime/strictmiddleware/nethttp"
)

// Defines values for ProcessInstanceState.
const (
	Active     ProcessInstanceState = "active"
	Completed  ProcessInstanceState = "completed"
	Terminated ProcessInstanceState = "terminated"
)

// Activity defines model for Activity.
type Activity struct {
	BpmnElementType      *string    `json:"bpmnElementType,omitempty"`
	CreatedAt            *time.Time `json:"createdAt,omitempty"`
	ElementId            *string    `json:"elementId,omitempty"`
	Key                  *string    `json:"key,omitempty"`
	ProcessDefinitionKey *string    `json:"processDefinitionKey,omitempty"`
	ProcessInstanceKey   *string    `json:"processInstanceKey,omitempty"`
	State                *string    `json:"state,omitempty"`
}

// ActivityPage defines model for ActivityPage.
type ActivityPage struct {
	// Embedded fields due to inline allOf schema
	Items *[]Activity `json:"items,omitempty"`
	// Embedded struct due to allOf(#/components/schemas/PageMetadata)
	PageMetadata `yaml:",inline"`
}

// Job defines model for Job.
type Job struct {
	CreatedAt          *time.Time `json:"createdAt,omitempty"`
	ElementId          *string    `json:"elementId,omitempty"`
	ElementInstanceKey *string    `json:"elementInstanceKey,omitempty"`
	Key                *string    `json:"key,omitempty"`
	ProcessInstanceKey *string    `json:"processInstanceKey,omitempty"`
	State              *string    `json:"state,omitempty"`
	Type               *string    `json:"type,omitempty"`
}

// JobPage defines model for JobPage.
type JobPage struct {
	// Embedded fields due to inline allOf schema
	Items *[]Job `json:"items,omitempty"`
	// Embedded struct due to allOf(#/components/schemas/PageMetadata)
	PageMetadata `yaml:",inline"`
}

// PageMetadata defines model for PageMetadata.
type PageMetadata struct {
	Count  *int `json:"count,omitempty"`
	Offset *int `json:"offset,omitempty"`
	Size   *int `json:"size,omitempty"`
}

// ProcessDefinitionDetail defines model for ProcessDefinitionDetail.
type ProcessDefinitionDetail struct {
	// Embedded struct due to allOf(#/components/schemas/ProcessDefinitionSimple)
	ProcessDefinitionSimple `yaml:",inline"`
	// Embedded fields due to inline allOf schema
	BpmnData *string `json:"bpmnData,omitempty"`
}

// ProcessDefinitionSimple defines model for ProcessDefinitionSimple.
type ProcessDefinitionSimple struct {
	BpmnProcessId *string `json:"bpmnProcessId,omitempty"`
	Key           *string `json:"key,omitempty"`
	Version       *int    `json:"version,omitempty"`
}

// ProcessDefinitionsPage defines model for ProcessDefinitionsPage.
type ProcessDefinitionsPage struct {
	// Embedded fields due to inline allOf schema
	Items *[]ProcessDefinitionSimple `json:"items,omitempty"`
	// Embedded struct due to allOf(#/components/schemas/PageMetadata)
	PageMetadata `yaml:",inline"`
}

// ProcessInstance defines model for ProcessInstance.
type ProcessInstance struct {
	Activities           *string              `json:"activities,omitempty"`
	CaughtEvents         *string              `json:"caughtEvents,omitempty"`
	CreatedAt            *time.Time           `json:"createdAt,omitempty"`
	Key                  string               `json:"key"`
	ProcessDefinitionKey string               `json:"processDefinitionKey"`
	State                ProcessInstanceState `json:"state"`
	VariableHolder       *string              `json:"variableHolder,omitempty"`
}

// ProcessInstanceState defines model for ProcessInstance.State.
type ProcessInstanceState string

// ProcessInstancePage defines model for ProcessInstancePage.
type ProcessInstancePage struct {
	// Embedded fields due to inline allOf schema
	Items *[]ProcessInstance `json:"items,omitempty"`
	// Embedded struct due to allOf(#/components/schemas/PageMetadata)
	PageMetadata `yaml:",inline"`
}

// CompleteJobJSONBody defines parameters for CompleteJob.
type CompleteJobJSONBody struct {
	JobKey    string                  `json:"jobKey"`
	Variables *map[string]interface{} `json:"variables,omitempty"`
}

// PublishMessageJSONBody defines parameters for PublishMessage.
type PublishMessageJSONBody struct {
	MessageName        string                  `json:"messageName"`
	ProcessInstanceKey string                  `json:"processInstanceKey"`
	Variables          *map[string]interface{} `json:"variables,omitempty"`
}

// CreateProcessInstanceJSONBody defines parameters for CreateProcessInstance.
type CreateProcessInstanceJSONBody struct {
	ProcessDefinitionKey string                  `json:"processDefinitionKey"`
	Variables            *map[string]interface{} `json:"variables,omitempty"`
}

// GetProcessInstancesParams defines parameters for GetProcessInstances.
type GetProcessInstancesParams struct {
	ProcessDefinitionKey *string `form:"processDefinitionKey,omitempty" json:"processDefinitionKey,omitempty"`
	Offset               *int    `form:"offset,omitempty" json:"offset,omitempty"`
	Size                 *int    `form:"size,omitempty" json:"size,omitempty"`
}

// CompleteJobJSONRequestBody defines body for CompleteJob for application/json ContentType.
type CompleteJobJSONRequestBody CompleteJobJSONBody

// PublishMessageJSONRequestBody defines body for PublishMessage for application/json ContentType.
type PublishMessageJSONRequestBody PublishMessageJSONBody

// CreateProcessInstanceJSONRequestBody defines body for CreateProcessInstance for application/json ContentType.
type CreateProcessInstanceJSONRequestBody CreateProcessInstanceJSONBody

// ServerInterface represents all server handlers.
type ServerInterface interface {
	// Complete a job
	// (POST /jobs)
	CompleteJob(w http.ResponseWriter, r *http.Request)
	// Activate jobs
	// (POST /jobs/{jobType}/activate)
	ActivateJobs(w http.ResponseWriter, r *http.Request, jobType string)
	// Publish a message
	// (POST /messages)
	PublishMessage(w http.ResponseWriter, r *http.Request)
	// Get list of process definitions
	// (GET /process-definitions)
	GetProcessDefinitions(w http.ResponseWriter, r *http.Request)
	// Deploy a new process definition
	// (POST /process-definitions)
	CreateProcessDefinition(w http.ResponseWriter, r *http.Request)
	// Get process definition
	// (GET /process-definitions/{processDefinitionKey})
	GetProcessDefinition(w http.ResponseWriter, r *http.Request, processDefinitionKey string)
	// Create a new process instance
	// (POST /process-instances)
	CreateProcessInstance(w http.ResponseWriter, r *http.Request)
	// Get list of running process instances
	// (GET /process-instances/)
	GetProcessInstances(w http.ResponseWriter, r *http.Request, params GetProcessInstancesParams)
	// Get state of a process instance selected by processInstanceId
	// (GET /process-instances/{processInstanceKey})
	GetProcessInstance(w http.ResponseWriter, r *http.Request, processInstanceKey string)
	// Get list of activities for a process instance
	// (GET /process-instances/{processInstanceKey}/activities)
	GetActivities(w http.ResponseWriter, r *http.Request, processInstanceKey string)
	// Get list of jobs for a process instance
	// (GET /process-instances/{processInstanceKey}/jobs)
	GetJobs(w http.ResponseWriter, r *http.Request, processInstanceKey string)
}

// Unimplemented server implementation that returns http.StatusNotImplemented for each endpoint.

type Unimplemented struct{}

// Complete a job
// (POST /jobs)
func (_ Unimplemented) CompleteJob(w http.ResponseWriter, r *http.Request) {
	w.WriteHeader(http.StatusNotImplemented)
}

// Activate jobs
// (POST /jobs/{jobType}/activate)
func (_ Unimplemented) ActivateJobs(w http.ResponseWriter, r *http.Request, jobType string) {
	w.WriteHeader(http.StatusNotImplemented)
}

// Publish a message
// (POST /messages)
func (_ Unimplemented) PublishMessage(w http.ResponseWriter, r *http.Request) {
	w.WriteHeader(http.StatusNotImplemented)
}

// Get list of process definitions
// (GET /process-definitions)
func (_ Unimplemented) GetProcessDefinitions(w http.ResponseWriter, r *http.Request) {
	w.WriteHeader(http.StatusNotImplemented)
}

// Deploy a new process definition
// (POST /process-definitions)
func (_ Unimplemented) CreateProcessDefinition(w http.ResponseWriter, r *http.Request) {
	w.WriteHeader(http.StatusNotImplemented)
}

// Get process definition
// (GET /process-definitions/{processDefinitionKey})
func (_ Unimplemented) GetProcessDefinition(w http.ResponseWriter, r *http.Request, processDefinitionKey string) {
	w.WriteHeader(http.StatusNotImplemented)
}

// Create a new process instance
// (POST /process-instances)
func (_ Unimplemented) CreateProcessInstance(w http.ResponseWriter, r *http.Request) {
	w.WriteHeader(http.StatusNotImplemented)
}

// Get list of running process instances
// (GET /process-instances/)
func (_ Unimplemented) GetProcessInstances(w http.ResponseWriter, r *http.Request, params GetProcessInstancesParams) {
	w.WriteHeader(http.StatusNotImplemented)
}

// Get state of a process instance selected by processInstanceId
// (GET /process-instances/{processInstanceKey})
func (_ Unimplemented) GetProcessInstance(w http.ResponseWriter, r *http.Request, processInstanceKey string) {
	w.WriteHeader(http.StatusNotImplemented)
}

// Get list of activities for a process instance
// (GET /process-instances/{processInstanceKey}/activities)
func (_ Unimplemented) GetActivities(w http.ResponseWriter, r *http.Request, processInstanceKey string) {
	w.WriteHeader(http.StatusNotImplemented)
}

// Get list of jobs for a process instance
// (GET /process-instances/{processInstanceKey}/jobs)
func (_ Unimplemented) GetJobs(w http.ResponseWriter, r *http.Request, processInstanceKey string) {
	w.WriteHeader(http.StatusNotImplemented)
}

// ServerInterfaceWrapper converts contexts to parameters.
type ServerInterfaceWrapper struct {
	Handler            ServerInterface
	HandlerMiddlewares []MiddlewareFunc
	ErrorHandlerFunc   func(w http.ResponseWriter, r *http.Request, err error)
}

type MiddlewareFunc func(http.Handler) http.Handler

// CompleteJob operation middleware
func (siw *ServerInterfaceWrapper) CompleteJob(w http.ResponseWriter, r *http.Request) {

	handler := http.Handler(http.HandlerFunc(func(w http.ResponseWriter, r *http.Request) {
		siw.Handler.CompleteJob(w, r)
	}))

	for i := len(siw.HandlerMiddlewares) - 1; i >= 0; i-- {
		handler = siw.HandlerMiddlewares[i](handler)
	}

	handler.ServeHTTP(w, r)
}

// ActivateJobs operation middleware
func (siw *ServerInterfaceWrapper) ActivateJobs(w http.ResponseWriter, r *http.Request) {

	var err error

	// ------------- Path parameter "jobType" -------------
	var jobType string

	err = runtime.BindStyledParameterWithOptions("simple", "jobType", chi.URLParam(r, "jobType"), &jobType, runtime.BindStyledParameterOptions{ParamLocation: runtime.ParamLocationPath, Explode: false, Required: true})
	if err != nil {
		siw.ErrorHandlerFunc(w, r, &InvalidParamFormatError{ParamName: "jobType", Err: err})
		return
	}

	handler := http.Handler(http.HandlerFunc(func(w http.ResponseWriter, r *http.Request) {
		siw.Handler.ActivateJobs(w, r, jobType)
	}))

	for i := len(siw.HandlerMiddlewares) - 1; i >= 0; i-- {
		handler = siw.HandlerMiddlewares[i](handler)
	}

	handler.ServeHTTP(w, r)
}

// PublishMessage operation middleware
func (siw *ServerInterfaceWrapper) PublishMessage(w http.ResponseWriter, r *http.Request) {

	handler := http.Handler(http.HandlerFunc(func(w http.ResponseWriter, r *http.Request) {
		siw.Handler.PublishMessage(w, r)
	}))

	for i := len(siw.HandlerMiddlewares) - 1; i >= 0; i-- {
		handler = siw.HandlerMiddlewares[i](handler)
	}

	handler.ServeHTTP(w, r)
}

// GetProcessDefinitions operation middleware
func (siw *ServerInterfaceWrapper) GetProcessDefinitions(w http.ResponseWriter, r *http.Request) {

	handler := http.Handler(http.HandlerFunc(func(w http.ResponseWriter, r *http.Request) {
		siw.Handler.GetProcessDefinitions(w, r)
	}))

	for i := len(siw.HandlerMiddlewares) - 1; i >= 0; i-- {
		handler = siw.HandlerMiddlewares[i](handler)
	}

	handler.ServeHTTP(w, r)
}

// CreateProcessDefinition operation middleware
func (siw *ServerInterfaceWrapper) CreateProcessDefinition(w http.ResponseWriter, r *http.Request) {

	handler := http.Handler(http.HandlerFunc(func(w http.ResponseWriter, r *http.Request) {
		siw.Handler.CreateProcessDefinition(w, r)
	}))

	for i := len(siw.HandlerMiddlewares) - 1; i >= 0; i-- {
		handler = siw.HandlerMiddlewares[i](handler)
	}

	handler.ServeHTTP(w, r)
}

// GetProcessDefinition operation middleware
func (siw *ServerInterfaceWrapper) GetProcessDefinition(w http.ResponseWriter, r *http.Request) {

	var err error

	// ------------- Path parameter "processDefinitionKey" -------------
	var processDefinitionKey string

	err = runtime.BindStyledParameterWithOptions("simple", "processDefinitionKey", chi.URLParam(r, "processDefinitionKey"), &processDefinitionKey, runtime.BindStyledParameterOptions{ParamLocation: runtime.ParamLocationPath, Explode: false, Required: true})
	if err != nil {
		siw.ErrorHandlerFunc(w, r, &InvalidParamFormatError{ParamName: "processDefinitionKey", Err: err})
		return
	}

	handler := http.Handler(http.HandlerFunc(func(w http.ResponseWriter, r *http.Request) {
		siw.Handler.GetProcessDefinition(w, r, processDefinitionKey)
	}))

	for i := len(siw.HandlerMiddlewares) - 1; i >= 0; i-- {
		handler = siw.HandlerMiddlewares[i](handler)
	}

	handler.ServeHTTP(w, r)
}

// CreateProcessInstance operation middleware
func (siw *ServerInterfaceWrapper) CreateProcessInstance(w http.ResponseWriter, r *http.Request) {

	handler := http.Handler(http.HandlerFunc(func(w http.ResponseWriter, r *http.Request) {
		siw.Handler.CreateProcessInstance(w, r)
	}))

	for i := len(siw.HandlerMiddlewares) - 1; i >= 0; i-- {
		handler = siw.HandlerMiddlewares[i](handler)
	}

	handler.ServeHTTP(w, r)
}

// GetProcessInstances operation middleware
func (siw *ServerInterfaceWrapper) GetProcessInstances(w http.ResponseWriter, r *http.Request) {

	var err error

	// Parameter object where we will unmarshal all parameters from the context
	var params GetProcessInstancesParams

	// ------------- Optional query parameter "processDefinitionKey" -------------

	err = runtime.BindQueryParameter("form", true, false, "processDefinitionKey", r.URL.Query(), &params.ProcessDefinitionKey)
	if err != nil {
		siw.ErrorHandlerFunc(w, r, &InvalidParamFormatError{ParamName: "processDefinitionKey", Err: err})
		return
	}

	// ------------- Optional query parameter "offset" -------------

	err = runtime.BindQueryParameter("form", true, false, "offset", r.URL.Query(), &params.Offset)
	if err != nil {
		siw.ErrorHandlerFunc(w, r, &InvalidParamFormatError{ParamName: "offset", Err: err})
		return
	}

	// ------------- Optional query parameter "size" -------------

	err = runtime.BindQueryParameter("form", true, false, "size", r.URL.Query(), &params.Size)
	if err != nil {
		siw.ErrorHandlerFunc(w, r, &InvalidParamFormatError{ParamName: "size", Err: err})
		return
	}

	handler := http.Handler(http.HandlerFunc(func(w http.ResponseWriter, r *http.Request) {
		siw.Handler.GetProcessInstances(w, r, params)
	}))

	for i := len(siw.HandlerMiddlewares) - 1; i >= 0; i-- {
		handler = siw.HandlerMiddlewares[i](handler)
	}

	handler.ServeHTTP(w, r)
}

// GetProcessInstance operation middleware
func (siw *ServerInterfaceWrapper) GetProcessInstance(w http.ResponseWriter, r *http.Request) {

	var err error

	// ------------- Path parameter "processInstanceKey" -------------
	var processInstanceKey string

	err = runtime.BindStyledParameterWithOptions("simple", "processInstanceKey", chi.URLParam(r, "processInstanceKey"), &processInstanceKey, runtime.BindStyledParameterOptions{ParamLocation: runtime.ParamLocationPath, Explode: false, Required: true})
	if err != nil {
		siw.ErrorHandlerFunc(w, r, &InvalidParamFormatError{ParamName: "processInstanceKey", Err: err})
		return
	}

	handler := http.Handler(http.HandlerFunc(func(w http.ResponseWriter, r *http.Request) {
		siw.Handler.GetProcessInstance(w, r, processInstanceKey)
	}))

	for i := len(siw.HandlerMiddlewares) - 1; i >= 0; i-- {
		handler = siw.HandlerMiddlewares[i](handler)
	}

	handler.ServeHTTP(w, r)
}

// GetActivities operation middleware
func (siw *ServerInterfaceWrapper) GetActivities(w http.ResponseWriter, r *http.Request) {

	var err error

	// ------------- Path parameter "processInstanceKey" -------------
	var processInstanceKey string

	err = runtime.BindStyledParameterWithOptions("simple", "processInstanceKey", chi.URLParam(r, "processInstanceKey"), &processInstanceKey, runtime.BindStyledParameterOptions{ParamLocation: runtime.ParamLocationPath, Explode: false, Required: true})
	if err != nil {
		siw.ErrorHandlerFunc(w, r, &InvalidParamFormatError{ParamName: "processInstanceKey", Err: err})
		return
	}

	handler := http.Handler(http.HandlerFunc(func(w http.ResponseWriter, r *http.Request) {
		siw.Handler.GetActivities(w, r, processInstanceKey)
	}))

	for i := len(siw.HandlerMiddlewares) - 1; i >= 0; i-- {
		handler = siw.HandlerMiddlewares[i](handler)
	}

	handler.ServeHTTP(w, r)
}

// GetJobs operation middleware
func (siw *ServerInterfaceWrapper) GetJobs(w http.ResponseWriter, r *http.Request) {

	var err error

	// ------------- Path parameter "processInstanceKey" -------------
	var processInstanceKey string

	err = runtime.BindStyledParameterWithOptions("simple", "processInstanceKey", chi.URLParam(r, "processInstanceKey"), &processInstanceKey, runtime.BindStyledParameterOptions{ParamLocation: runtime.ParamLocationPath, Explode: false, Required: true})
	if err != nil {
		siw.ErrorHandlerFunc(w, r, &InvalidParamFormatError{ParamName: "processInstanceKey", Err: err})
		return
	}

	handler := http.Handler(http.HandlerFunc(func(w http.ResponseWriter, r *http.Request) {
		siw.Handler.GetJobs(w, r, processInstanceKey)
	}))

	for i := len(siw.HandlerMiddlewares) - 1; i >= 0; i-- {
		handler = siw.HandlerMiddlewares[i](handler)
	}

	handler.ServeHTTP(w, r)
}

type UnescapedCookieParamError struct {
	ParamName string
	Err       error
}

func (e *UnescapedCookieParamError) Error() string {
	return fmt.Sprintf("error unescaping cookie parameter '%s'", e.ParamName)
}

func (e *UnescapedCookieParamError) Unwrap() error {
	return e.Err
}

type UnmarshalingParamError struct {
	ParamName string
	Err       error
}

func (e *UnmarshalingParamError) Error() string {
	return fmt.Sprintf("Error unmarshaling parameter %s as JSON: %s", e.ParamName, e.Err.Error())
}

func (e *UnmarshalingParamError) Unwrap() error {
	return e.Err
}

type RequiredParamError struct {
	ParamName string
}

func (e *RequiredParamError) Error() string {
	return fmt.Sprintf("Query argument %s is required, but not found", e.ParamName)
}

type RequiredHeaderError struct {
	ParamName string
	Err       error
}

func (e *RequiredHeaderError) Error() string {
	return fmt.Sprintf("Header parameter %s is required, but not found", e.ParamName)
}

func (e *RequiredHeaderError) Unwrap() error {
	return e.Err
}

type InvalidParamFormatError struct {
	ParamName string
	Err       error
}

func (e *InvalidParamFormatError) Error() string {
	return fmt.Sprintf("Invalid format for parameter %s: %s", e.ParamName, e.Err.Error())
}

func (e *InvalidParamFormatError) Unwrap() error {
	return e.Err
}

type TooManyValuesForParamError struct {
	ParamName string
	Count     int
}

func (e *TooManyValuesForParamError) Error() string {
	return fmt.Sprintf("Expected one value for %s, got %d", e.ParamName, e.Count)
}

// Handler creates http.Handler with routing matching OpenAPI spec.
func Handler(si ServerInterface) http.Handler {
	return HandlerWithOptions(si, ChiServerOptions{})
}

type ChiServerOptions struct {
	BaseURL          string
	BaseRouter       chi.Router
	Middlewares      []MiddlewareFunc
	ErrorHandlerFunc func(w http.ResponseWriter, r *http.Request, err error)
}

// HandlerFromMux creates http.Handler with routing matching OpenAPI spec based on the provided mux.
func HandlerFromMux(si ServerInterface, r chi.Router) http.Handler {
	return HandlerWithOptions(si, ChiServerOptions{
		BaseRouter: r,
	})
}

func HandlerFromMuxWithBaseURL(si ServerInterface, r chi.Router, baseURL string) http.Handler {
	return HandlerWithOptions(si, ChiServerOptions{
		BaseURL:    baseURL,
		BaseRouter: r,
	})
}

// HandlerWithOptions creates http.Handler with additional options
func HandlerWithOptions(si ServerInterface, options ChiServerOptions) http.Handler {
	r := options.BaseRouter

	if r == nil {
		r = chi.NewRouter()
	}
	if options.ErrorHandlerFunc == nil {
		options.ErrorHandlerFunc = func(w http.ResponseWriter, r *http.Request, err error) {
			http.Error(w, err.Error(), http.StatusBadRequest)
		}
	}
	wrapper := ServerInterfaceWrapper{
		Handler:            si,
		HandlerMiddlewares: options.Middlewares,
		ErrorHandlerFunc:   options.ErrorHandlerFunc,
	}

	r.Group(func(r chi.Router) {
		r.Post(options.BaseURL+"/jobs", wrapper.CompleteJob)
	})
	r.Group(func(r chi.Router) {
		r.Post(options.BaseURL+"/jobs/{jobType}/activate", wrapper.ActivateJobs)
	})
	r.Group(func(r chi.Router) {
		r.Post(options.BaseURL+"/messages", wrapper.PublishMessage)
	})
	r.Group(func(r chi.Router) {
		r.Get(options.BaseURL+"/process-definitions", wrapper.GetProcessDefinitions)
	})
	r.Group(func(r chi.Router) {
		r.Post(options.BaseURL+"/process-definitions", wrapper.CreateProcessDefinition)
	})
	r.Group(func(r chi.Router) {
		r.Get(options.BaseURL+"/process-definitions/{processDefinitionKey}", wrapper.GetProcessDefinition)
	})
	r.Group(func(r chi.Router) {
		r.Post(options.BaseURL+"/process-instances", wrapper.CreateProcessInstance)
	})
	r.Group(func(r chi.Router) {
		r.Get(options.BaseURL+"/process-instances/", wrapper.GetProcessInstances)
	})
	r.Group(func(r chi.Router) {
		r.Get(options.BaseURL+"/process-instances/{processInstanceKey}", wrapper.GetProcessInstance)
	})
	r.Group(func(r chi.Router) {
		r.Get(options.BaseURL+"/process-instances/{processInstanceKey}/activities", wrapper.GetActivities)
	})
	r.Group(func(r chi.Router) {
		r.Get(options.BaseURL+"/process-instances/{processInstanceKey}/jobs", wrapper.GetJobs)
	})

	return r
}

type CompleteJobRequestObject struct {
	Body *CompleteJobJSONRequestBody
}

type CompleteJobResponseObject interface {
	VisitCompleteJobResponse(w http.ResponseWriter) error
}

type CompleteJob201Response struct {
}

func (response CompleteJob201Response) VisitCompleteJobResponse(w http.ResponseWriter) error {
	w.WriteHeader(201)
	return nil
}

type ActivateJobsRequestObject struct {
	JobType string `json:"jobType"`
}

type ActivateJobsResponseObject interface {
	VisitActivateJobsResponse(w http.ResponseWriter) error
}

type ActivateJobs200JSONResponse []Job

func (response ActivateJobs200JSONResponse) VisitActivateJobsResponse(w http.ResponseWriter) error {
	w.Header().Set("Content-Type", "application/json")
	w.WriteHeader(200)

	return json.NewEncoder(w).Encode(response)
}

type PublishMessageRequestObject struct {
	Body *PublishMessageJSONRequestBody
}

type PublishMessageResponseObject interface {
	VisitPublishMessageResponse(w http.ResponseWriter) error
}

type PublishMessage201Response struct {
}

func (response PublishMessage201Response) VisitPublishMessageResponse(w http.ResponseWriter) error {
	w.WriteHeader(201)
	return nil
}

type GetProcessDefinitionsRequestObject struct {
}

type GetProcessDefinitionsResponseObject interface {
	VisitGetProcessDefinitionsResponse(w http.ResponseWriter) error
}

type GetProcessDefinitions200JSONResponse ProcessDefinitionsPage

func (response GetProcessDefinitions200JSONResponse) VisitGetProcessDefinitionsResponse(w http.ResponseWriter) error {
	w.Header().Set("Content-Type", "application/json")
	w.WriteHeader(200)

	return json.NewEncoder(w).Encode(response)
}

type CreateProcessDefinitionRequestObject struct {
	Body io.Reader
}

type CreateProcessDefinitionResponseObject interface {
	VisitCreateProcessDefinitionResponse(w http.ResponseWriter) error
}

type CreateProcessDefinition200JSONResponse struct {
	ProcessDefinitionKey *string `json:"processDefinitionKey,omitempty"`
}

func (response CreateProcessDefinition200JSONResponse) VisitCreateProcessDefinitionResponse(w http.ResponseWriter) error {
	w.Header().Set("Content-Type", "application/json")
	w.WriteHeader(200)

	return json.NewEncoder(w).Encode(response)
}

type GetProcessDefinitionRequestObject struct {
	ProcessDefinitionKey string `json:"processDefinitionKey"`
}

type GetProcessDefinitionResponseObject interface {
	VisitGetProcessDefinitionResponse(w http.ResponseWriter) error
}

type GetProcessDefinition200JSONResponse ProcessDefinitionDetail

func (response GetProcessDefinition200JSONResponse) VisitGetProcessDefinitionResponse(w http.ResponseWriter) error {
	w.Header().Set("Content-Type", "application/json")
	w.WriteHeader(200)

	return json.NewEncoder(w).Encode(response)
}

type CreateProcessInstanceRequestObject struct {
	Body *CreateProcessInstanceJSONRequestBody
}

type CreateProcessInstanceResponseObject interface {
	VisitCreateProcessInstanceResponse(w http.ResponseWriter) error
}

type CreateProcessInstance200JSONResponse ProcessInstance

func (response CreateProcessInstance200JSONResponse) VisitCreateProcessInstanceResponse(w http.ResponseWriter) error {
	w.Header().Set("Content-Type", "application/json")
	w.WriteHeader(200)

	return json.NewEncoder(w).Encode(response)
}

type GetProcessInstancesRequestObject struct {
	Params GetProcessInstancesParams
}

type GetProcessInstancesResponseObject interface {
	VisitGetProcessInstancesResponse(w http.ResponseWriter) error
}

type GetProcessInstances200JSONResponse struct {
	ProcessInstances *[]ProcessInstancePage `json:"processInstances,omitempty"`
	Total            int                    `json:"total"`
}

func (response GetProcessInstances200JSONResponse) VisitGetProcessInstancesResponse(w http.ResponseWriter) error {
	w.Header().Set("Content-Type", "application/json")
	w.WriteHeader(200)

	return json.NewEncoder(w).Encode(response)
}

type GetProcessInstanceRequestObject struct {
	ProcessInstanceKey string `json:"processInstanceKey"`
}

type GetProcessInstanceResponseObject interface {
	VisitGetProcessInstanceResponse(w http.ResponseWriter) error
}

type GetProcessInstance200JSONResponse ProcessInstance

func (response GetProcessInstance200JSONResponse) VisitGetProcessInstanceResponse(w http.ResponseWriter) error {
	w.Header().Set("Content-Type", "application/json")
	w.WriteHeader(200)

	return json.NewEncoder(w).Encode(response)
}

type GetActivitiesRequestObject struct {
	ProcessInstanceKey string `json:"processInstanceKey"`
}

type GetActivitiesResponseObject interface {
	VisitGetActivitiesResponse(w http.ResponseWriter) error
}

type GetActivities200JSONResponse ActivityPage

func (response GetActivities200JSONResponse) VisitGetActivitiesResponse(w http.ResponseWriter) error {
	w.Header().Set("Content-Type", "application/json")
	w.WriteHeader(200)

	return json.NewEncoder(w).Encode(response)
}

type GetJobsRequestObject struct {
	ProcessInstanceKey string `json:"processInstanceKey"`
}

type GetJobsResponseObject interface {
	VisitGetJobsResponse(w http.ResponseWriter) error
}

type GetJobs200JSONResponse JobPage

func (response GetJobs200JSONResponse) VisitGetJobsResponse(w http.ResponseWriter) error {
	w.Header().Set("Content-Type", "application/json")
	w.WriteHeader(200)

	return json.NewEncoder(w).Encode(response)
}

// StrictServerInterface represents all server handlers.
type StrictServerInterface interface {
	// Complete a job
	// (POST /jobs)
	CompleteJob(ctx context.Context, request CompleteJobRequestObject) (CompleteJobResponseObject, error)
	// Activate jobs
	// (POST /jobs/{jobType}/activate)
	ActivateJobs(ctx context.Context, request ActivateJobsRequestObject) (ActivateJobsResponseObject, error)
	// Publish a message
	// (POST /messages)
	PublishMessage(ctx context.Context, request PublishMessageRequestObject) (PublishMessageResponseObject, error)
	// Get list of process definitions
	// (GET /process-definitions)
	GetProcessDefinitions(ctx context.Context, request GetProcessDefinitionsRequestObject) (GetProcessDefinitionsResponseObject, error)
	// Deploy a new process definition
	// (POST /process-definitions)
	CreateProcessDefinition(ctx context.Context, request CreateProcessDefinitionRequestObject) (CreateProcessDefinitionResponseObject, error)
	// Get process definition
	// (GET /process-definitions/{processDefinitionKey})
	GetProcessDefinition(ctx context.Context, request GetProcessDefinitionRequestObject) (GetProcessDefinitionResponseObject, error)
	// Create a new process instance
	// (POST /process-instances)
	CreateProcessInstance(ctx context.Context, request CreateProcessInstanceRequestObject) (CreateProcessInstanceResponseObject, error)
	// Get list of running process instances
	// (GET /process-instances/)
	GetProcessInstances(ctx context.Context, request GetProcessInstancesRequestObject) (GetProcessInstancesResponseObject, error)
	// Get state of a process instance selected by processInstanceId
	// (GET /process-instances/{processInstanceKey})
	GetProcessInstance(ctx context.Context, request GetProcessInstanceRequestObject) (GetProcessInstanceResponseObject, error)
	// Get list of activities for a process instance
	// (GET /process-instances/{processInstanceKey}/activities)
	GetActivities(ctx context.Context, request GetActivitiesRequestObject) (GetActivitiesResponseObject, error)
	// Get list of jobs for a process instance
	// (GET /process-instances/{processInstanceKey}/jobs)
	GetJobs(ctx context.Context, request GetJobsRequestObject) (GetJobsResponseObject, error)
}

type StrictHandlerFunc = strictnethttp.StrictHTTPHandlerFunc
type StrictMiddlewareFunc = strictnethttp.StrictHTTPMiddlewareFunc

type StrictHTTPServerOptions struct {
	RequestErrorHandlerFunc  func(w http.ResponseWriter, r *http.Request, err error)
	ResponseErrorHandlerFunc func(w http.ResponseWriter, r *http.Request, err error)
}

func NewStrictHandler(ssi StrictServerInterface, middlewares []StrictMiddlewareFunc) ServerInterface {
	return &strictHandler{ssi: ssi, middlewares: middlewares, options: StrictHTTPServerOptions{
		RequestErrorHandlerFunc: func(w http.ResponseWriter, r *http.Request, err error) {
			http.Error(w, err.Error(), http.StatusBadRequest)
		},
		ResponseErrorHandlerFunc: func(w http.ResponseWriter, r *http.Request, err error) {
			http.Error(w, err.Error(), http.StatusInternalServerError)
		},
	}}
}

func NewStrictHandlerWithOptions(ssi StrictServerInterface, middlewares []StrictMiddlewareFunc, options StrictHTTPServerOptions) ServerInterface {
	return &strictHandler{ssi: ssi, middlewares: middlewares, options: options}
}

type strictHandler struct {
	ssi         StrictServerInterface
	middlewares []StrictMiddlewareFunc
	options     StrictHTTPServerOptions
}

// CompleteJob operation middleware
func (sh *strictHandler) CompleteJob(w http.ResponseWriter, r *http.Request) {
	var request CompleteJobRequestObject

	var body CompleteJobJSONRequestBody
	if err := json.NewDecoder(r.Body).Decode(&body); err != nil {
		sh.options.RequestErrorHandlerFunc(w, r, fmt.Errorf("can't decode JSON body: %w", err))
		return
	}
	request.Body = &body

	handler := func(ctx context.Context, w http.ResponseWriter, r *http.Request, request interface{}) (interface{}, error) {
		return sh.ssi.CompleteJob(ctx, request.(CompleteJobRequestObject))
	}
	for _, middleware := range sh.middlewares {
		handler = middleware(handler, "CompleteJob")
	}

	response, err := handler(r.Context(), w, r, request)

	if err != nil {
		sh.options.ResponseErrorHandlerFunc(w, r, err)
	} else if validResponse, ok := response.(CompleteJobResponseObject); ok {
		if err := validResponse.VisitCompleteJobResponse(w); err != nil {
			sh.options.ResponseErrorHandlerFunc(w, r, err)
		}
	} else if response != nil {
		sh.options.ResponseErrorHandlerFunc(w, r, fmt.Errorf("unexpected response type: %T", response))
	}
}

// ActivateJobs operation middleware
func (sh *strictHandler) ActivateJobs(w http.ResponseWriter, r *http.Request, jobType string) {
	var request ActivateJobsRequestObject

	request.JobType = jobType

	handler := func(ctx context.Context, w http.ResponseWriter, r *http.Request, request interface{}) (interface{}, error) {
		return sh.ssi.ActivateJobs(ctx, request.(ActivateJobsRequestObject))
	}
	for _, middleware := range sh.middlewares {
		handler = middleware(handler, "ActivateJobs")
	}

	response, err := handler(r.Context(), w, r, request)

	if err != nil {
		sh.options.ResponseErrorHandlerFunc(w, r, err)
	} else if validResponse, ok := response.(ActivateJobsResponseObject); ok {
		if err := validResponse.VisitActivateJobsResponse(w); err != nil {
			sh.options.ResponseErrorHandlerFunc(w, r, err)
		}
	} else if response != nil {
		sh.options.ResponseErrorHandlerFunc(w, r, fmt.Errorf("unexpected response type: %T", response))
	}
}

// PublishMessage operation middleware
func (sh *strictHandler) PublishMessage(w http.ResponseWriter, r *http.Request) {
	var request PublishMessageRequestObject

	var body PublishMessageJSONRequestBody
	if err := json.NewDecoder(r.Body).Decode(&body); err != nil {
		sh.options.RequestErrorHandlerFunc(w, r, fmt.Errorf("can't decode JSON body: %w", err))
		return
	}
	request.Body = &body

	handler := func(ctx context.Context, w http.ResponseWriter, r *http.Request, request interface{}) (interface{}, error) {
		return sh.ssi.PublishMessage(ctx, request.(PublishMessageRequestObject))
	}
	for _, middleware := range sh.middlewares {
		handler = middleware(handler, "PublishMessage")
	}

	response, err := handler(r.Context(), w, r, request)

	if err != nil {
		sh.options.ResponseErrorHandlerFunc(w, r, err)
	} else if validResponse, ok := response.(PublishMessageResponseObject); ok {
		if err := validResponse.VisitPublishMessageResponse(w); err != nil {
			sh.options.ResponseErrorHandlerFunc(w, r, err)
		}
	} else if response != nil {
		sh.options.ResponseErrorHandlerFunc(w, r, fmt.Errorf("unexpected response type: %T", response))
	}
}

// GetProcessDefinitions operation middleware
func (sh *strictHandler) GetProcessDefinitions(w http.ResponseWriter, r *http.Request) {
	var request GetProcessDefinitionsRequestObject

	handler := func(ctx context.Context, w http.ResponseWriter, r *http.Request, request interface{}) (interface{}, error) {
		return sh.ssi.GetProcessDefinitions(ctx, request.(GetProcessDefinitionsRequestObject))
	}
	for _, middleware := range sh.middlewares {
		handler = middleware(handler, "GetProcessDefinitions")
	}

	response, err := handler(r.Context(), w, r, request)

	if err != nil {
		sh.options.ResponseErrorHandlerFunc(w, r, err)
	} else if validResponse, ok := response.(GetProcessDefinitionsResponseObject); ok {
		if err := validResponse.VisitGetProcessDefinitionsResponse(w); err != nil {
			sh.options.ResponseErrorHandlerFunc(w, r, err)
		}
	} else if response != nil {
		sh.options.ResponseErrorHandlerFunc(w, r, fmt.Errorf("unexpected response type: %T", response))
	}
}

// CreateProcessDefinition operation middleware
func (sh *strictHandler) CreateProcessDefinition(w http.ResponseWriter, r *http.Request) {
	var request CreateProcessDefinitionRequestObject

	request.Body = r.Body

	handler := func(ctx context.Context, w http.ResponseWriter, r *http.Request, request interface{}) (interface{}, error) {
		return sh.ssi.CreateProcessDefinition(ctx, request.(CreateProcessDefinitionRequestObject))
	}
	for _, middleware := range sh.middlewares {
		handler = middleware(handler, "CreateProcessDefinition")
	}

	response, err := handler(r.Context(), w, r, request)

	if err != nil {
		sh.options.ResponseErrorHandlerFunc(w, r, err)
	} else if validResponse, ok := response.(CreateProcessDefinitionResponseObject); ok {
		if err := validResponse.VisitCreateProcessDefinitionResponse(w); err != nil {
			sh.options.ResponseErrorHandlerFunc(w, r, err)
		}
	} else if response != nil {
		sh.options.ResponseErrorHandlerFunc(w, r, fmt.Errorf("unexpected response type: %T", response))
	}
}

// GetProcessDefinition operation middleware
func (sh *strictHandler) GetProcessDefinition(w http.ResponseWriter, r *http.Request, processDefinitionKey string) {
	var request GetProcessDefinitionRequestObject

	request.ProcessDefinitionKey = processDefinitionKey

	handler := func(ctx context.Context, w http.ResponseWriter, r *http.Request, request interface{}) (interface{}, error) {
		return sh.ssi.GetProcessDefinition(ctx, request.(GetProcessDefinitionRequestObject))
	}
	for _, middleware := range sh.middlewares {
		handler = middleware(handler, "GetProcessDefinition")
	}

	response, err := handler(r.Context(), w, r, request)

	if err != nil {
		sh.options.ResponseErrorHandlerFunc(w, r, err)
	} else if validResponse, ok := response.(GetProcessDefinitionResponseObject); ok {
		if err := validResponse.VisitGetProcessDefinitionResponse(w); err != nil {
			sh.options.ResponseErrorHandlerFunc(w, r, err)
		}
	} else if response != nil {
		sh.options.ResponseErrorHandlerFunc(w, r, fmt.Errorf("unexpected response type: %T", response))
	}
}

// CreateProcessInstance operation middleware
func (sh *strictHandler) CreateProcessInstance(w http.ResponseWriter, r *http.Request) {
	var request CreateProcessInstanceRequestObject

	var body CreateProcessInstanceJSONRequestBody
	if err := json.NewDecoder(r.Body).Decode(&body); err != nil {
		sh.options.RequestErrorHandlerFunc(w, r, fmt.Errorf("can't decode JSON body: %w", err))
		return
	}
	request.Body = &body

	handler := func(ctx context.Context, w http.ResponseWriter, r *http.Request, request interface{}) (interface{}, error) {
		return sh.ssi.CreateProcessInstance(ctx, request.(CreateProcessInstanceRequestObject))
	}
	for _, middleware := range sh.middlewares {
		handler = middleware(handler, "CreateProcessInstance")
	}

	response, err := handler(r.Context(), w, r, request)

	if err != nil {
		sh.options.ResponseErrorHandlerFunc(w, r, err)
	} else if validResponse, ok := response.(CreateProcessInstanceResponseObject); ok {
		if err := validResponse.VisitCreateProcessInstanceResponse(w); err != nil {
			sh.options.ResponseErrorHandlerFunc(w, r, err)
		}
	} else if response != nil {
		sh.options.ResponseErrorHandlerFunc(w, r, fmt.Errorf("unexpected response type: %T", response))
	}
}

// GetProcessInstances operation middleware
func (sh *strictHandler) GetProcessInstances(w http.ResponseWriter, r *http.Request, params GetProcessInstancesParams) {
	var request GetProcessInstancesRequestObject

	request.Params = params

	handler := func(ctx context.Context, w http.ResponseWriter, r *http.Request, request interface{}) (interface{}, error) {
		return sh.ssi.GetProcessInstances(ctx, request.(GetProcessInstancesRequestObject))
	}
	for _, middleware := range sh.middlewares {
		handler = middleware(handler, "GetProcessInstances")
	}

	response, err := handler(r.Context(), w, r, request)

	if err != nil {
		sh.options.ResponseErrorHandlerFunc(w, r, err)
	} else if validResponse, ok := response.(GetProcessInstancesResponseObject); ok {
		if err := validResponse.VisitGetProcessInstancesResponse(w); err != nil {
			sh.options.ResponseErrorHandlerFunc(w, r, err)
		}
	} else if response != nil {
		sh.options.ResponseErrorHandlerFunc(w, r, fmt.Errorf("unexpected response type: %T", response))
	}
}

// GetProcessInstance operation middleware
func (sh *strictHandler) GetProcessInstance(w http.ResponseWriter, r *http.Request, processInstanceKey string) {
	var request GetProcessInstanceRequestObject

	request.ProcessInstanceKey = processInstanceKey

	handler := func(ctx context.Context, w http.ResponseWriter, r *http.Request, request interface{}) (interface{}, error) {
		return sh.ssi.GetProcessInstance(ctx, request.(GetProcessInstanceRequestObject))
	}
	for _, middleware := range sh.middlewares {
		handler = middleware(handler, "GetProcessInstance")
	}

	response, err := handler(r.Context(), w, r, request)

	if err != nil {
		sh.options.ResponseErrorHandlerFunc(w, r, err)
	} else if validResponse, ok := response.(GetProcessInstanceResponseObject); ok {
		if err := validResponse.VisitGetProcessInstanceResponse(w); err != nil {
			sh.options.ResponseErrorHandlerFunc(w, r, err)
		}
	} else if response != nil {
		sh.options.ResponseErrorHandlerFunc(w, r, fmt.Errorf("unexpected response type: %T", response))
	}
}

// GetActivities operation middleware
func (sh *strictHandler) GetActivities(w http.ResponseWriter, r *http.Request, processInstanceKey string) {
	var request GetActivitiesRequestObject

	request.ProcessInstanceKey = processInstanceKey

	handler := func(ctx context.Context, w http.ResponseWriter, r *http.Request, request interface{}) (interface{}, error) {
		return sh.ssi.GetActivities(ctx, request.(GetActivitiesRequestObject))
	}
	for _, middleware := range sh.middlewares {
		handler = middleware(handler, "GetActivities")
	}

	response, err := handler(r.Context(), w, r, request)

	if err != nil {
		sh.options.ResponseErrorHandlerFunc(w, r, err)
	} else if validResponse, ok := response.(GetActivitiesResponseObject); ok {
		if err := validResponse.VisitGetActivitiesResponse(w); err != nil {
			sh.options.ResponseErrorHandlerFunc(w, r, err)
		}
	} else if response != nil {
		sh.options.ResponseErrorHandlerFunc(w, r, fmt.Errorf("unexpected response type: %T", response))
	}
}

// GetJobs operation middleware
func (sh *strictHandler) GetJobs(w http.ResponseWriter, r *http.Request, processInstanceKey string) {
	var request GetJobsRequestObject

	request.ProcessInstanceKey = processInstanceKey

	handler := func(ctx context.Context, w http.ResponseWriter, r *http.Request, request interface{}) (interface{}, error) {
		return sh.ssi.GetJobs(ctx, request.(GetJobsRequestObject))
	}
	for _, middleware := range sh.middlewares {
		handler = middleware(handler, "GetJobs")
	}

	response, err := handler(r.Context(), w, r, request)

	if err != nil {
		sh.options.ResponseErrorHandlerFunc(w, r, err)
	} else if validResponse, ok := response.(GetJobsResponseObject); ok {
		if err := validResponse.VisitGetJobsResponse(w); err != nil {
			sh.options.ResponseErrorHandlerFunc(w, r, err)
		}
	} else if response != nil {
		sh.options.ResponseErrorHandlerFunc(w, r, fmt.Errorf("unexpected response type: %T", response))
	}
}

// Base64 encoded, gzipped, json marshaled Swagger object
var swaggerSpec = []string{

	"H4sIAAAAAAAC/9RZTXPbNhD9Kxi0R9mU20tGN6X2pHKbRFPnltEBJFcSFBJggKVaVaP/3gEIil+gTMmy",
	"Jz1FIZaLxXtvPwjvaSTTTAoQqOlkT3W0hpTZn9MI+ZbjzvzOlMxAIQe7EmapeEggBYFfdhmYR2j/pRoV",
	"Fyt6GNFIAUOIp2hWl1KlDOmExgzhBnkKdNR9BQqXs9jr8BvsvM8zJSPQ+h6WXHDkUvxx2nAmNDIRQZ+Z",
	"Roa+Ix2OEctwAxEa2xKiOVvZV1iSfF7Sydc2YBwhbf74WcGSTuhPQQV/4LAPjsBXWzKl2M4bw2lXJrCP",
	"gCxmyOhh4TnCowy7BF+dvHL1Gey/vQ51ZbiDOH2U4XXpNAi/BZMNiy6lMhdYg4ALhBUo86JcLjX0rGn+",
	"L/hWfMjN25l4D8h40kTy5BnbDp54miVgselWoHt3zmc5XQyJ1W3lrXXO+MzCtAWluRQXo6evK8N+cN9A",
	"ms387aLMipLn/tdtJixfrfFhW3apa3SbF/eTY7UBkad08rU4hNnLYJQAQmz2BZVyYYKjC08UW6Y4CxP4",
	"XSYxKL+cFXzPuYLY7GGi7omxRGGKtAxuABevIrIj0a8vLuORi6U0kcWgI8UztFlH/3p4+kKm8xlZSkUS",
	"Ht6YVL4BseLCCoKjyXf6fv7xE3mwT8nnDMR0PqO15KXj27vbsS2TGQiWcTqhv96Ob8eGBoZrC0mwkaH9",
	"kUltJWgQZCYOUzPob04PphMUdILG9zLeFYVZIBSlmWVZwiP7XrDRRekocOhmzEaGfcIsNVVPlSNcTTk5",
	"L35YK0NUOdgHOpNCF45/Gd91MX+UIanUb5zoPE2Z2tVQIIxsLBDIVtoFoenCGFscg/1GhmauPAQ2o1yW",
	"+aGdOotH48MwolgKCEpbKXMTk2GJjqhgqTmg803bxxvVkG6n4KJz9PFZzL1gTDiMughrUuLShrhEg2wK",
	"ODwIp6A1W8EJtc7zMOF6/bEwvJpg3cafLA2Xz3hniNvjcdQI42qyd1gRbXBpUuLQJIykR0BLWo5cFNS4",
	"eG/iagQwW63AQ9IHwO7AQF+o07PGh2I88Sj0T66RyCVxxyH14zSx+QBIkhPWFVI+aBZGNP56a/tgJ+LB",
	"Uv4nTZrAHCcKs9Lp4kNEM35B5gycSA5eNTe5mXdQJjFkidx1Ssm9fUwYEfC3h5xnuekRdLD3neZwls4H",
	"1fmeEentiv5ZyeS+lAYx5kmiF/LDXYU8NcLUU+o43l2rNwyeuc+v/k2fl1X8qxNfzcf9hJekEPdt056m",
	"7NNWfvKKmDb7Fcc93AcDcnB2dOJPwe85qN2zOdifcyO/H3dBUX8zhiXLE6ST8cjzde13Y+8yvE7ufF4W",
	"r1HEZ/VUu+STqui67TlxRFEiS3ruGuppUdgtBvSKso+rXAguVh2Rnerm/e9cosx9d5I7nKHWc/pFc1j8",
	"obrFqaLxZD73DfCsWwu6LOl+a6IhgQghJuGOtDCZxVdjL2he+PQROa2s/uccNv5ScCLZarj0Z1dlZO82",
	"2HXqv5en8mKjj6HB390/MDfljf8JWiwM/YSY5QupMD5BbUvkcpXQCV0jZpMgSGTEkrXUOHk3fjcOtnfF",
	"BVjhbt9CtjHfmRbYWq6V7cXhvwAAAP//gT0j6PcbAAA=",
}

// GetSwagger returns the content of the embedded swagger specification file
// or error if failed to decode
func decodeSpec() ([]byte, error) {
	zipped, err := base64.StdEncoding.DecodeString(strings.Join(swaggerSpec, ""))
	if err != nil {
		return nil, fmt.Errorf("error base64 decoding spec: %w", err)
	}
	zr, err := gzip.NewReader(bytes.NewReader(zipped))
	if err != nil {
		return nil, fmt.Errorf("error decompressing spec: %w", err)
	}
	var buf bytes.Buffer
	_, err = buf.ReadFrom(zr)
	if err != nil {
		return nil, fmt.Errorf("error decompressing spec: %w", err)
	}

	return buf.Bytes(), nil
}

var rawSpec = decodeSpecCached()

// a naive cached of a decoded swagger spec
func decodeSpecCached() func() ([]byte, error) {
	data, err := decodeSpec()
	return func() ([]byte, error) {
		return data, err
	}
}

// Constructs a synthetic filesystem for resolving external references when loading openapi specifications.
func PathToRawSpec(pathToFile string) map[string]func() ([]byte, error) {
	res := make(map[string]func() ([]byte, error))
	if len(pathToFile) > 0 {
		res[pathToFile] = rawSpec
	}

	return res
}

// GetSwagger returns the Swagger specification corresponding to the generated code
// in this file. The external references of Swagger specification are resolved.
// The logic of resolving external references is tightly connected to "import-mapping" feature.
// Externally referenced files must be embedded in the corresponding golang packages.
// Urls can be supported but this task was out of the scope.
func GetSwagger() (swagger *openapi3.T, err error) {
	resolvePath := PathToRawSpec("")

	loader := openapi3.NewLoader()
	loader.IsExternalRefsAllowed = true
	loader.ReadFromURIFunc = func(loader *openapi3.Loader, url *url.URL) ([]byte, error) {
		pathToFile := url.String()
		pathToFile = path.Clean(pathToFile)
		getSpec, ok := resolvePath[pathToFile]
		if !ok {
			err1 := fmt.Errorf("path not found: %s", pathToFile)
			return nil, err1
		}
		return getSpec()
	}
	var specData []byte
	specData, err = rawSpec()
	if err != nil {
		return
	}
	swagger, err = loader.LoadFromData(specData)
	if err != nil {
		return
	}
	return
}
